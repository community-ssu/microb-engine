#Bug 376530  Fix CycleCollector building with uClibc library
--- mozilla/xpcom/base/nsCycleCollector.cpp.orig	2007-04-03 09:50:51.000000000 +0300
+++ mozilla/xpcom/base/nsCycleCollector.cpp	2007-04-03 11:29:12.589164000 +0300
@@ -1146,21 +1146,21 @@ struct graphVizWalker : public GraphWalk
 
 
 ////////////////////////////////////////////////////////////////////////
 // Memory-hooking stuff
 // When debugging wild pointers, it sometimes helps to hook malloc and
 // free. This stuff is disabled unless you set an environment variable.
 ////////////////////////////////////////////////////////////////////////
 
 static PRBool hookedMalloc = PR_FALSE;
 
-#ifdef __GLIBC__
+#if defined(__GLIBC__) && !defined(__UCLIBC__)
 #include <malloc.h>
 
 static void* (*old_memalign_hook)(size_t, size_t, const void *);
 static void* (*old_realloc_hook)(void *, size_t, const void *);
 static void* (*old_malloc_hook)(size_t, const void *);
 static void (*old_free_hook)(void *, const void *);
 
 static void* my_memalign_hook(size_t, size_t, const void *);
 static void* my_realloc_hook(void *, size_t, const void *);
 static void* my_malloc_hook(size_t, const void *);
