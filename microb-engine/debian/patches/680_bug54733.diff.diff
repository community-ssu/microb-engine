# Send event about parsing XSL content
# Hacky way to get info about RSS content for such pages like
# http://newsrss.bbc.co.uk/rss/newsonline_world_edition/front_page/rss.xml
--- mozilla/content/xml/document/src/nsXMLContentSink.cpp.orig	2007-06-11 13:15:17.000000000 +0300
+++ mozilla/content/xml/document/src/nsXMLContentSink.cpp	2007-09-11 15:01:28.000000000 +0300
@@ -770,20 +770,23 @@ nsXMLContentSink::ProcessStyleLink(nsICo
                                    nsnull,
                                    &decision,
                                    nsContentUtils::GetContentPolicy());
 
     NS_ENSURE_SUCCESS(rv, rv);
 
     if (NS_CP_REJECTED(decision)) {
       return NS_OK;
     }
 
+    nsContentUtils::DispatchTrustedEvent(mDocument,
+                                         NS_STATIC_CAST(nsIContent*, aElement),
+                                         NS_LITERAL_STRING("DOMLinkXSLParsed"), PR_TRUE, PR_TRUE);
     return LoadXSLStyleSheet(url);
   }
 
   // Let nsContentSink deal with css.
   rv = nsContentSink::ProcessStyleLink(aElement, aHref, aAlternate,
                                        aTitle, aType, aMedia);
 
   // nsContentSink::ProcessStyleLink handles the bookkeeping here wrt
   // pending sheets.
   
