#Bug 368280  rounding problems with half pixels at negative widget coordinates causes gap between image and border
Index: ds/nsUnitConversion.h
===================================================================
RCS file: /cvsroot/mozilla/xpcom/ds/nsUnitConversion.h,v
retrieving revision 3.15
diff -p -u -1 -0 -r3.15 nsUnitConversion.h
--- mozilla/xpcom/ds/nsUnitConversion.h	28 Feb 2007 20:57:13 -0000	3.15
+++ mozilla/xpcom/ds/nsUnitConversion.h	29 Jun 2007 16:37:35 -0000
@@ -55,21 +55,21 @@ inline nscoord NSToCoordFloor(float aVal
   return nscoord(NS_floorf(aValue));
 }
 
 inline nscoord NSToCoordCeil(float aValue)
 {
   return nscoord(NS_ceilf(aValue));
 }
 
 inline nscoord NSToCoordRound(float aValue)
 {
-  return nscoord(NS_roundf(aValue));
+  return nscoord(NS_floorf(aValue + 0.5f));
 }
 
 /*
  * Int Rounding Functions
  */
 inline PRInt32 NSToIntFloor(float aValue)
 {
   return PRInt32(NS_floorf(aValue));
 }
 
