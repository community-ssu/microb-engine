#Bug 363374  [reflow branch] overflow: hidden container has gotten much wider in this testcase
Index: mozilla/layout/base/nsLayoutUtils.cpp
===================================================================
--- mozilla.orig/layout/base/nsLayoutUtils.cpp
+++ mozilla/layout/base/nsLayoutUtils.cpp
@@ -1223,20 +1223,17 @@ nsLayoutUtils::IsViewportScrollbarFrame(
 
 static nscoord AddPercents(nsLayoutUtils::IntrinsicWidthType aType,
                            nscoord aCurrent, float aPercent)
 {
   nscoord result = aCurrent;
   if (aPercent > 0.0f && aType == nsLayoutUtils::PREF_WIDTH) {
     // XXX Should we also consider percentages for min widths, up to a
     // limit?
-    if (aPercent >= 1.0f)
-      result = nscoord_MAX;
-    else
-      result = NSToCoordRound(float(result) / (1.0f - aPercent));
+    result = NSToCoordRound(float(result) * (1.0 + aPercent));
   }
   return result;
 }
 
 /* static */ PRBool
 nsLayoutUtils::GetAbsoluteCoord(const nsStyleCoord& aStyle,
                                 nsIRenderingContext* aRenderingContext,
                                 nsIFrame* aFrame,
